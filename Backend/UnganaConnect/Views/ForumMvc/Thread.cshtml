@model UnganaConnect.Models.Forum.ForumThread

@{
    ViewData["Title"] = "Forum Thread";
}

<h1>@Model.Title</h1>

<p>By @Model.User.FirstName @Model.User.LastName on @Model.CreatedAt.ToString("g")</p>

<div>
    <p>@Model.Content</p>
</div>

<h3>Replies</h3>

<table class="table">
    <thead>
        <tr>
            <th>Author</th>
            <th>Content</th>
            <th>Posted At</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var reply in Model.Replies)
    {
        <tr>
            <td>@reply.User.FirstName @reply.User.LastName</td>
            <td>@reply.Content</td>
            <td>@reply.CreatedAt.ToString("g")</td>
        </tr>
    }
    </tbody>
</table>

@if (User.Identity.IsAuthenticated)
{
    <h4>Post a Reply</h4>
    <form asp-action="PostReply" method="post">
        <input type="hidden" asp-for="Id" />
        <div class="form-group">
            <textarea name="Content" class="form-control" rows="3" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Submit Reply</button>
    </form>
}
else
{
    <p><a href="/Auth/Login">Login</a> to post a reply.</p>
}

<a asp-action="Home" class="btn btn-secondary">Back to Forum</a>
